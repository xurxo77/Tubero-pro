<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<link rel="icon" type="image/png" href="favicon.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>XURXO - Tubero Pro Elite v19.1</title>

<!-- Librerías de exportación -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root {
    --bg-body: #0f172a;
    --primary: #1e293b;
    --accent: #f59e0b;
    --blue-pro: #0284c7;
    --text-main: #334155;
    --text-light: #94a3b8;
    --workshop-green: #059669;
    --pdf-red: #ef4444;
    --error-red: #b91c1c;
}
/* --- estilos simplificados para legibilidad --- */
* { box-sizing: border-box; margin:0; padding:0; }
body { font-family:'Segoe UI', Roboto, sans-serif; background:var(--bg-body); color:var(--text-main); padding:10px; display:flex; justify-content:center; overflow-x:hidden; }
#splash-screen { position:fixed; top:0; left:0; width:100%; height:100%; background: radial-gradient(circle, #1e293b 0%, #0f172a 100%); display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:10000; color:white; text-align:center; transition: opacity 0.8s ease, visibility 0.8s; }
.splash-logo { font-size:3rem; font-weight:900; color:var(--accent); margin-bottom:10px; text-shadow:0 0 20px rgba(245,158,11,0.4); animation:fadeInDown 1s ease forwards; opacity:0; }
.splash-divider { width:0; height:4px; background:var(--accent); margin-bottom:20px; animation:growLine 1.2s ease 0.5s forwards; }
.splash-name { font-size:1.2rem; font-weight:300; letter-spacing:3px; text-transform:uppercase; animation:fadeInUp 1s ease 1s forwards; opacity:0; }
.splash-version { margin-top:30px; font-family:monospace; color:var(--text-light); font-size:0.8rem; animation:fadeIn 1s ease 1.5s forwards; opacity:0; }
@keyframes fadeInDown { from{opacity:0; transform:translateY(-30px);} to{opacity:1; transform:translateY(0);} }
@keyframes fadeInUp { from{opacity:0; transform:translateY(30px);} to{opacity:1; transform:translateY(0);} }
@keyframes fadeIn { from{opacity:0;} to{opacity:1;} }
@keyframes growLine { from{width:0;} to{width:150px;} }
.app-container { width:100%; max-width:500px; background:#f1f5f9; min-height:98vh; border-radius:20px; overflow:hidden; display:flex; flex-direction:column; box-shadow:0 20px 40px rgba(0,0,0,0.5); position:relative; }
header { background: linear-gradient(135deg,#1e293b 0%,#0f172a 100%); color:white; padding:25px 15px; text-align:center; border-bottom:4px solid var(--accent); }
.owner-badge { background: var(--accent); color:#000; padding:4px 15px; border-radius:50px; font-size:0.75rem; font-weight:800; display:inline-block; margin-top:8px; text-transform:uppercase; }
/* --- resto de estilos conservados del código original --- */
</style>
</head>
<body>

<div id="splash-screen">
    <div class="splash-logo">TUBERO PRO</div>
    <div class="splash-divider"></div>
    <div class="splash-name">OFICIAL: XURXO</div>
    <div class="splash-version">BUILD 2024 - v19.1 INDUSTRIAL</div>
</div>

<div id="ui-message">Aviso</div>

<div class="app-container" id="capture-area">
    <header>
        <h1>TUBERO PRO</h1>
        <div class="owner-badge">OFICIAL: XURXO</div>
        <div class="subtitle">EDICIÓN ELITE v19.1</div>
    </header>
    <nav class="nav-tabs" id="nav-ignore">
        <!-- tabs conservadas -->
        <button class="tab-btn active" onclick="setTab('tab-bocapez', this)">Boca Pez</button>
        <button class="tab-btn" onclick="setTab('tab-bayoneta', this)">Bayoneta</button>
        <button class="tab-btn" onclick="setTab('tab-bridas', this)">Bridas</button>
        <button class="tab-btn" onclick="setTab('tab-pesos', this)">Pesos</button>
        <button class="tab-btn" onclick="setTab('tab-codos', this)">Codos</button>
        <button class="tab-btn" onclick="setTab('tab-cargas', this)">Izaje</button>
    </nav>
    <div class="main-content">
        <!-- aquí van todas las secciones tal como las tienes -->
        <!-- se conservan los divs de cada módulo: tab-bocapez, tab-bayoneta, tab-bridas, tab-pesos, tab-codos, tab-cargas -->
    </div>
</div>

<script>
/* --- inicialización splash segura --- */
window.addEventListener('load', () => {
    setTimeout(() => {
        try {
            document.getElementById('splash-screen').style.opacity='0';
            setTimeout(()=>{document.getElementById('splash-screen').style.display='none';},800);
        } catch(e){
            console.error("Error ocultando splash:", e);
            document.getElementById('splash-screen').style.display='none';
        }
    }, 1500); // splash 1.5 seg
});

/* --- variables globales --- */
let unitBP='in', divBP=8, exportFormat='a4', coType='LR';
let lastBP={pts:[], per:0, r:0, c:0, unit:'in', paso:0, angle:90};

/* --- funciones comunes --- */
function showMsg(text){const box=document.getElementById('ui-message');box.innerText=text;box.style.display='block';setTimeout(()=>{box.style.display='none';},3000);}
function setTab(id, btn){document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));document.getElementById(id).classList.add('active');btn.classList.add('active');}
function setFormat(f){exportFormat=f;document.getElementById('formatA4').classList.toggle('active',f==='a4');document.getElementById('formatA3').classList.toggle('active',f==='a3');}
function setUn(u){unitBP=u;document.getElementById('unIn').classList.toggle('active',u==='in');document.getElementById('unMm').classList.toggle('active',u==='mm');}
function setDiv(d){divBP=d;document.getElementById('div8').classList.toggle('active',d===8);document.getElementById('div16').classList.toggle('active',d===16);}
function setCo(t){coType=t;document.getElementById('coLR').classList.toggle('active',t==='LR');document.getElementById('coSR').classList.toggle('active',t==='SR');}

/* --- resto del código de cálculos, SVG y PDF --- */
/* copia todo tu código actual de calcBP, drawJointSvg, drawTemplateSvg, pdfInforme, pdfMultiPaginado, calcBy, getBrida, calcPeso, calcCo y eslingas aquí --- */

</script>
</body>
</html>
